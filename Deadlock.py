# Deadlock Code
import threading
import time

# ุจูุนุฑู ุงูููููู (Resources) ุงููู ุงูุฎูุงูุฉ ูุชุญุตู ุนูููู
# ุชุฎูููู ูููููุ ููู ูุงุญุฏ ูุญุชุงุฌ ุงูููููู ุนุดุงู ููุชุจ
resource_1 = threading.Lock()
resource_2 = threading.Lock()


def thread_1():
    # 1. ุงูู Thread ุฏู ูููุณู ุงูููุฑุฏ ุงูุฃูู ููููู ุนููู
    with resource_1:
        print("Thread 1: ุฃูุง ูุณูุช resource_1 ุฎูุงุต ๐")

        # ุจูุนูู sleep ุนุดุงู ูุฏู ูุฑุตุฉ ูู thread_2 ููุญู ูุดุชุบู ูููุณู ุงูููุฑุฏ ุจุชุงุนู
        # ุฏู ุงููุญุธุฉ ุงููู ุจุชุถูู ุญุฏูุซ ุงููุดููุฉ
        time.sleep(1)

        print("Thread 1: ุฃูุง ุฏูููุชู ูุณุชูู resource_2 ููุถู ุนุดุงู ุฃุฎุฏู... โณ")

        # 2. ุงููุญุธุฉ ุงูุญุงุณูุฉ (Nested Lock):
        # ูู "ูุณู ูุงุณู" ุงูููุฑุฏ ุงูุฃูู (ูุฃููุง ูุณู ุฌูู ุงูู with ุงูุฃููู)
        # ูุจูุญุงูู ูุงุฎุฏ ุงูููุฑุฏ ุงูุชุงูู.. ุจุณ ุงูุชุงูู ูุดุบูู ูุน Thread 2
        # ููููุถู ูุงูู ููุง ููุฃุจุฏ ููุด ููุชุญุฑู
    with resource_2:
            print("Thread 1: ุฃุฎูููุฑุงู ูุณูุช resource_2 (ุงูุฌููุฉ ุฏู ูุด ูุชุชุทุจุน ุฃุจุฏุงู ๐)")


def thread_2():
    # 1. ุงูู Thread ุงูุชุงูู ุจุฏุฃ ููุณู ุงูููุฑุฏ ุงูุชุงูู ูููู ุนููู (ุนูุณ ุงูุฃููุงูู)
    with resource_2:
        print("Thread 2: ุฃูุง ูุณูุช resource_2 ุฎูุงุต ๐")

        # ูุงู ุซุงููุฉ ูู ููุงู
        time.sleep(1)

        print("Thread 2: ุฃูุง ุฏูููุชู ูุณุชูู resource_1 ููุถู ุนุดุงู ุฃุฎุฏู... โณ")

        # 2. ุจูุญุงูู ูุงุฎุฏ ุงูุฃูู ููู ูุณู ูุงุณู ุงูุชุงูู
        # ูููุงูู ุงูุฃูู ูุดุบูู ูุน Thread 1.. ูููู ูุณุชูู
        # ุงููุชูุฌุฉ: ุฏู ูุณุชูู ุฏูุ ูุฏู ูุณุชูู ุฏู.. ูุงูุงุชููู ุนุทูุงููู
    with resource_1:
         print("Thread 2: ุฃุฎูููุฑุงู ูุณูุช resource_1 (ุงูุฌููุฉ ุฏู ูุด ูุชุชุทุจุน ุฃุจุฏุงู ๐)")


# ุชุฌููุฒ ุงูู Threads
a = threading.Thread(target=thread_1, name="thread1")
b = threading.Thread(target=thread_2, name="thread2")


# ุชุดุบูู ุงูู Threads
a.start()
b.start()

# ููุญูุธุฉ: ุงูุจุฑูุงูุฌ ูููุถู ุดุบุงู ููุด ููููู (Terminated) ุบูุฑ ููุง ุชูููู ุฃูุช
